@startuml "Help us Class Diagram"
title "Help us Class Diagram"

class ObtainTokenResponse {
    + access_token : str
    + merchant_id : str
    + refresh_token : str
    + short_lived : bool
}

class ObtainTokenRequest {
    + grant_type : str
    + client_id : str
    + client_secret : str
    + scopes : list
    + code : str
}

class SearchResultRequest {
    + authorizationCode : str
    + List<SearchResult> search_results
}

class TransactionResult

class SerpService {
    - external_api_credentials : ExternalApiCredentials
    + List<SearchResult> search_with_ebay(str keyword)
}

class PaymentService {
    + authorize_with_square(str authorizationCode) : TransactionResult
    + checkout_with_square(SearchResultRequest search_results_request) : str
}

class BackendService {
    + save_payment_result(TransactionResult result) : bool
}

class SearchResult {
    + title : str
    + link : str
    + condition : str
    + price : str
    + shipping : str
    + extensions : List<str>
    + thumbnail : str

}

class SearchController {
    - serp_service : SerpService
    + search_with_ebay(str keyword) : List<SearchResult>
}

class PaymentController {
    - payment_service : PaymentService
    + checkout_with_square(SearchResultRequest search_results_request) : str
    + callback_with_square(TransactionResult result) : bool
}

class LambdaHandler {
    + handle(event, context) : dict
}


SearchController ..> SerpService : Uses

PaymentController ..> PaymentService : Uses

PaymentController ..> BackendService : Uses

PaymentService ..> ObtainTokenResponse : Uses

PaymentService ..> ObtainTokenRequest : Uses

PaymentService ..> TransactionResult : Uses

PaymentService ..> SearchResultRequest : Uses

LambdaHandler ..> PaymentController : Uses

LambdaHandler ..> SearchController : Uses

@enduml

